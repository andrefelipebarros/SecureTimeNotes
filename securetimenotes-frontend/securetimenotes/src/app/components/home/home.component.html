<div class="home-container">
  <h2 *ngIf="!showTitlePrompt && !showNoteEditor">SecureTime</h2>

  <ng-container *ngIf="!isAuthenticated(); else loggedInTemplate">
    <button [routerLink]="'/login'">Login</button>
    <br />
    <button [routerLink]="'/register'">Register</button>
    </ng-container>

    <ng-template #loggedInTemplate>
        <!-- Header e Logout (apenas quando nÃ£o estiver criando/editando) -->
        <div *ngIf="!showTitlePrompt && !showNoteEditor" class="header-info">
        <button (click)="logout()">Logout</button>
        </div>

        <!-- Modal para o tÃ­tulo da nota -->
        <div class="modal" *ngIf="showTitlePrompt">
        <h3>Digite o tÃ­tulo da nota</h3>
        <input type="text" [(ngModel)]="newNoteTitle" placeholder="TÃ­tulo da nota" />
        <button (click)="confirmTitle()">Continuar</button>
        </div>

        <!-- Editor da nota -->
        <div class="note-form" *ngIf="showNoteEditor">
        <h3>{{ editingNote ? 'Editando' : 'Criando' }}: {{ newNoteTitle }}</h3>
        <textarea [(ngModel)]="newNoteContent" placeholder="Digite o conteÃºdo da nota..."></textarea>
        <button (click)="editingNote ? saveEdit() : createNote()">
            {{ editingNote ? 'Salvar' : 'Criar' }}
        </button>
        <button (click)="cancelEdit()">Cancelar</button>
        </div>

        <!-- Container com o cartÃ£o de criaÃ§Ã£o e os cartÃµes de nota -->
        <div class="notes-container" *ngIf="!showTitlePrompt && !showNoteEditor">
        <!-- CartÃ£o de criaÃ§Ã£o minimalista (sÃ³ o "+") -->
        <div class="create-document" (click)="openNoteTitlePrompt()">
            <span class="plus-symbol">+</span>
        </div>

        <!-- CartÃµes de nota existentes -->
        <div class="note-card" *ngFor="let note of notes" (click)="editNote(note)">
            <div class="note-icon">ðŸ“„</div>
            <!-- Limita o tÃ­tulo aos primeiros 15 caracteres -->
            <div class="note-title">{{ note.title | slice:0:9 }}</div>
        </div>
        </div>
    </ng-template>
</div>
